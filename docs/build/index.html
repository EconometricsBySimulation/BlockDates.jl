<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · BlockDates.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>BlockDates.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Package-Features"><span>Package Features</span></a></li><li><a class="tocitem" href="#Function-Documentation"><span>Function Documentation</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com//blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="BlockDates.jl"><a class="docs-heading-anchor" href="#BlockDates.jl">BlockDates.jl</a><a id="BlockDates.jl-1"></a><a class="docs-heading-anchor-permalink" href="#BlockDates.jl" title="Permalink"></a></h1><p><em>A Context aware fuzzy date matching tool</em></p><h2 id="Package-Features"><a class="docs-heading-anchor" href="#Package-Features">Package Features</a><a id="Package-Features-1"></a><a class="docs-heading-anchor-permalink" href="#Package-Features" title="Permalink"></a></h2><ul><li>Sum the squares of two numbers</li></ul><h2 id="Function-Documentation"><a class="docs-heading-anchor" href="#Function-Documentation">Function Documentation</a><a id="Function-Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Function-Documentation" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="BlockDates.blockdate" href="#BlockDates.blockdate"><code>BlockDates.blockdate</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">blockdate(
    txtin; 
    dtstart         = Date(0), 
    dtend           = Date(0),
    splits          = r&quot;[\n\r]+&quot;,
    singleformats   = length(singleset),
    rangeformats    = length(rangeset),
    targetScore     = 5,
    verbose         = false)

    txtin         : Text block unput into blockdates
    dtstart       : Start date of dates
    dtend         : End date of dates  
    splits        : Defines the character used to split the input text. Default is line breaks    
    singleformats : Single formats allowed integers
    rangeformats  : Range formats allowed integers
    targetScore   : Cut score considered good enough
    verbose       : Provide extra feedback</code></pre></div></section></article><article class="docstring"><header><a class="docstring-binding" id="BlockDates.dateformat2regex" href="#BlockDates.dateformat2regex"><code>BlockDates.dateformat2regex</code></a> — <span class="docstring-category">Function</span></header><section><div><p>dateformat2regex converts input dateformats into potential regex matches.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="BlockDates.replacemonth" href="#BlockDates.replacemonth"><code>BlockDates.replacemonth</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Replace month matches with numbers when found in text.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="BlockDates.removedays" href="#BlockDates.removedays"><code>BlockDates.removedays</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Remove potential day name matches from text</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="BlockDates.removestopwords" href="#BlockDates.removestopwords"><code>BlockDates.removestopwords</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Remove potential stop words  and common words from x:     &quot;NOTE|Between|On|At|Continued|Date&quot; and      &quot;On|At|from&quot;</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="BlockDates.removecommonprefix" href="#BlockDates.removecommonprefix"><code>BlockDates.removecommonprefix</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Remove common prefixes in the text.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="BlockDates.removejoiner" href="#BlockDates.removejoiner"><code>BlockDates.removejoiner</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Remove joiner text: &quot;thru|through|to&quot;</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="BlockDates.singleGenerator" href="#BlockDates.singleGenerator"><code>BlockDates.singleGenerator</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">singleGenerator(dateformat = &quot;mm dd yyyy&quot;, scoremod = 5, mod = Day(0))</code></pre><p>Generates a function that will interprets a single date from text passed to it.</p><p><strong>Arguments</strong></p><ul><li><code>dateformat</code>:  date that the rangeInterpretor will attempt to match  dateformat to look for are of the type used with the DateFormat() function</li><li><code>scoremod</code>:    score to assign to this range interpretation</li><li><code>mod</code>:         number of Days, Years to add to the date after interpretation</li></ul></div></section></article><article class="docstring"><header><a class="docstring-binding" id="BlockDates.singleYearMissGen" href="#BlockDates.singleYearMissGen"><code>BlockDates.singleYearMissGen</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">singleYearMissGen(infunction::Function, penalty = -3)</code></pre><p>Missing Year in Date Single Allow for missing year in date eg. <code>mm dd</code> or <code>dd mm</code></p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="BlockDates.cleanDate" href="#BlockDates.cleanDate"><code>BlockDates.cleanDate</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">cleanDate(text)</code></pre><p>Make text more readable by the date interpreter. (make lowercase, replace month with #, remove days, remove common prefixes, remove stop words, remove joiners, replace markers used to divide dates, and remove common numeric ordering tags (st, nd, rd).</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="BlockDates.DateMod" href="#BlockDates.DateMod"><code>BlockDates.DateMod</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">DateMod(inDate, scoremod; mods = &quot;&quot;, defaultdate = Date(0))</code></pre><p>Adjust dates to be within feasible range.</p></div></section><section><div><pre><code class="nohighlight hljs">DateMod(inDate::Date, ender::Date, scoremod; mods = &quot;&quot;, defaultdate = Date(0))

Apply DateMod to inDate and ender separately then do two more modifications.
If inDate is greater than ender swap.
If the date range is too wide (greater than 30 days) force the end date to be
only 6 days after the start date.</code></pre></div></section></article><article class="docstring"><header><a class="docstring-binding" id="BlockDates.formatRange" href="#BlockDates.formatRange"><code>BlockDates.formatRange</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">formatRange(textin; rangeformat = 1, defaultdate = Date(0))</code></pre><p>Convert range from &quot;11/29/2020 - 12/05/2020&quot; to a dataframe with scoremods.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="BlockDates.andSplit" href="#BlockDates.andSplit"><code>BlockDates.andSplit</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">andSplit(txtin, splitters = &quot;(?:\/)&quot;, ands = &quot;(?:and|,)&quot;)</code></pre><p>A function to split dates that have groupings like &quot;and&quot; and &quot;,&quot;.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="BlockDates.textToBlock" href="#BlockDates.textToBlock"><code>BlockDates.textToBlock</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">textToBlock(txtsplit::Array{String}; 
                singleformat = 1, 
                rangeformat  = 1,
                defaultdate = Date(0))</code></pre><p>Takes a date text string list and tries to match each element first as a range  then as a single.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="BlockDates.spreadOverNonDates" href="#BlockDates.spreadOverNonDates"><code>BlockDates.spreadOverNonDates</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">spreadOverNonDates(inframe)</code></pre><p>Merges rows with missing dates with previous row (unless first row then merges with next row).</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="BlockDates.joinDuplicateDates" href="#BlockDates.joinDuplicateDates"><code>BlockDates.joinDuplicateDates</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">joinDuplicateDates(inframe, penalty = 7)</code></pre><p>Join any duplicate dates which have different text together. Scoremod penalizes these observations by -7 number of duplicate dates.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="BlockDates.fillMissing" href="#BlockDates.fillMissing"><code>BlockDates.fillMissing</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">fillMissing(inframe, dtstart = Date(0), dtend   = Date(0))</code></pre><p>Join any duplicate dates which have different text together. Scoremod penalizes these observations by -7 number of duplicate dates.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="BlockDates.scoreDatesOutside!" href="#BlockDates.scoreDatesOutside!"><code>BlockDates.scoreDatesOutside!</code></a> — <span class="docstring-category">Function</span></header><section><div><p>scoreDatesOutside!(inblock; dtstart, dtend, penalty = 5)</p><p>Scores dates outside of the dtstart - dtend range. Dates which are outside  get penalized by the penalty value. If they are outside by more than 1 2 4 8 16 25 100 weeks then then accumulate another penalty for each step and the &quot;outOfRange&quot; gets a &quot;*&quot; appended to it for each step.</p><p>Parameters: inblock: DataFrame containing date, mod, and scoremod columns dtstart: the start of the interval of interest dtend: the end of the interval of interest penalty: the penalty to the scoremod for each step out of the dtstart/dtend range</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="BlockDates.dropBadMatches" href="#BlockDates.dropBadMatches"><code>BlockDates.dropBadMatches</code></a> — <span class="docstring-category">Function</span></header><section><div><p>dropBadMatches(inframe::DataFrame, dropscore = -15)</p><p>Removes the date and score from any dates for which their interpretation is extremely low scored. This is most often helpful when a non-date becomes interpetted as a date.</p></div></section></article><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>fixBlock</code>. Check Documenter&#39;s build log for details.</p></div></div><article class="docstring"><header><a class="docstring-binding" id="BlockDates.scoreOutofOrder!" href="#BlockDates.scoreOutofOrder!"><code>BlockDates.scoreOutofOrder!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">scoreOutofOrder!(inblock, dtstart, dtend)</code></pre><p>penalizes dates out of order</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="BlockDates.scoreBlock" href="#BlockDates.scoreBlock"><code>BlockDates.scoreBlock</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">scoreBlock(inframe; dtstart = Date(0), dtend = Date(0))</code></pre><p>Score the passed block by first adjusting for out of order entries then     taking the average of the scoremod values.</p></div></section></article><pre><code class="language-julia hljs">using BlockDates, Dates

txt = &quot;&quot;&quot;
03/14/2022 went for a walk
and a stroll
03/15 went sky diving
03/16/2022 went fishing
&quot;&quot;&quot;

blockdate(txt; dtstart = Date(&quot;2022-03-14&quot;), dtend = Date(&quot;2022-03-16&quot;))

3×8 DataFrame
 Row │ date        mods     scoremod  score    order    text                               singleformat  rangeformat 
     │ Date        String?  Int64?    Float64  Array…?  String                             Int64         Int64       
─────┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────
   1 │ 2022-03-14                  2      2.0  [1]      03/14/2022 went for a walk \n an…             5            1
   2 │ 2022-03-15                  2      2.0  [3]      03/15 went sky diving                         5            1
   3 │ 2022-03-16                  2      2.0  [4]      03/16/2022 went fishing                       5            1</code></pre></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.15 on <span class="colophon-date" title="Thursday 31 March 2022 21:35">Thursday 31 March 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
